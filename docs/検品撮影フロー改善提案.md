# 検品撮影フロー改善提案

## 概要
商品検品チェックリスト完了後の保管場所自動設定機能を実装し、業務フローの効率化と作業ミスの削減を図ります。

## 現状の課題
- 検品完了後に別途保管場所を設定する必要があり、作業が分断されている
- 保管場所設定のタイミングが不明確で、作業漏れのリスクがある
- 手動での商品移動操作が必要で、作業効率が低い

## 改善内容

### 1. 検品完了時の保管場所選択機能

**実装箇所**: `app/components/features/inspection/InspectionResult.tsx`

#### 主要機能
- **自動推奨システム**: 商品カテゴリに基づく保管場所の自動推奨
  - カメラ・レンズ → 防湿庫（Hゾーン）を推奨
  - 腕時計 → 金庫室（Vゾーン）を推奨  
  - その他 → 標準棚（Aゾーン）を推奨

- **保管場所選択UI**: 検品結果確認画面に保管場所選択セクションを追加
  - 利用可能なロケーション一覧の表示
  - 各ロケーションの使用状況・容量表示
  - 推奨ロケーションのハイライト表示

- **必須入力チェック**: 保管場所未選択時の完了防止機能

#### UI構成
```
[検品結果サマリー]
[商品情報]
[保管場所の設定] ← 新規追加
  ├─ 推奨保管場所の表示
  ├─ ロケーション選択ドロップダウン
  └─ 選択中ロケーションの詳細表示
[チェックリスト詳細]
[検品メモ]
[完了ボタン]
```

### 2. バックエンド連携

**API連携**: 既存の `/api/products/inspection` エンドポイントを活用
- `locationId` パラメータで保管場所情報を送信
- 商品の `currentLocationId` フィールド自動更新
- `InventoryMovement` テーブルへの移動履歴自動記録

### 3. 業務フロー最適化

#### 改善前のフロー
1. 検品作業完了
2. 検品結果登録
3. **別途** 在庫管理画面で商品移動操作
4. 保管場所設定

#### 改善後のフロー  
1. 検品作業完了
2. 保管場所選択（推奨ロケーション自動表示）
3. 検品結果+保管場所を一括登録 ← **統合化**

## 実装詳細

### フロントエンド更新

#### `InspectionResult.tsx`
- 保管場所選択機能の追加
- ロケーションデータ取得API連携
- カテゴリベース推奨ロケーション機能
- 必須入力バリデーション

#### `InspectionForm.tsx`  
- `submitInspection` 関数の修正
- 保管場所情報のAPI送信対応
- エラーハンドリング強化

### バックエンド活用
既存の `/api/products/inspection` エンドポイントをそのまま活用
- 追加パラメータ: `locationId`
- 自動処理: 商品移動履歴の記録

## 期待効果

### 1. 作業効率向上
- 検品〜保管場所設定の一本化
- 作業ステップ数の削減（4ステップ→3ステップ）
- 推奨ロケーションによる判断時間短縮

### 2. 品質向上  
- 保管場所設定漏れの防止
- カテゴリ別適切な保管場所の自動推奨
- 移動履歴の自動記録による追跡性向上

### 3. ユーザビリティ向上
- 自然な業務フローの実現
- 直感的な保管場所選択UI
- リアルタイムな使用状況表示

## 技術仕様

### 対応商品カテゴリ
- `camera_body`: カメラボディ → 防湿庫推奨
- `lens`: レンズ → 防湿庫推奨  
- `watch`: 腕時計 → 金庫室推奨
- その他: 標準棚推奨

### 保管場所ゾーン分類
- **Aゾーン**: 標準棚
- **Hゾーン**: 防湿庫（湿度管理）
- **Vゾーン**: 金庫室（高セキュリティ）

### データベース更新
- `Product.currentLocationId`: 保管場所ID
- `InventoryMovement`: 移動履歴レコード自動作成

## 運用開始後の期待値

### 定量的効果
- 作業時間短縮: 15-20%削減
- 保管場所設定漏れ: 0件/月
- 適切な保管場所選択率: 95%以上

### 定性的効果
- 作業者の負担軽減
- 商品管理精度の向上
- システム操作の習熟度向上

---

**実装完了日**: 2024年1月
**対象バージョン**: v1.0
**実装者**: システム開発チーム