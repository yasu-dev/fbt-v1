flowchart LR
    %% シンプルな左から右への流れ
    
    %% ステップ1：準備
    subgraph Step1 ["🎯 STEP1：準備"]
        A1["🛒 セラー<br/>商品仕入れ"]
        A2["📋 セラー<br/>納品プラン作成"]
        A3["📦 セラー<br/>ATW倉庫発送"]
    end
    
    %% ステップ2：入庫
    subgraph Step2 ["📥 STEP2：入庫"]
        B1["📦 スタッフ<br/>商品受取"]
        B2["✅ スタッフ<br/>検品・撮影"]
        B3["🏪 スタッフ<br/>在庫登録"]
    end
    
    %% ステップ3：販売
    subgraph Step3 ["🛒 STEP3：販売"]
        C1["🤖 システム<br/>eBay自動出品"]
        C2["👤 購入者<br/>商品注文"]
        C3["📨 システム<br/>受注処理"]
    end
    
    %% ステップ4：出荷
    subgraph Step4 ["📤 STEP4：出荷"]
        D1["🎯 スタッフ<br/>ピッキング"]
        D2["📦 スタッフ<br/>梱包・発送"]
        D3["👤 購入者<br/>商品受取"]
    end
    
    %% ステップ5：完了
    subgraph Step5 ["💰 STEP5：完了"]
        E1["💹 システム<br/>売上計算"]
        E2["💳 セラー<br/>精算確認"]
        E3["🔄 セラー<br/>次回仕入れ"]
    end
    
    %% メインフロー（太い矢印）
    A1 --> A2 --> A3
    A3 ==> B1
    B1 --> B2 --> B3
    B3 ==> C1
    C1 --> C2 --> C3
    C3 ==> D1
    D1 --> D2 --> D3
    D3 ==> E1
    E1 --> E2 --> E3
    
    %% 循環（点線）
    E3 -.-> A1
    
    %% 返品ルート（細い矢印）
    D3 --> RT["🔄 返品<br/>（必要時）"]
    RT --> B2
    
    %% スタイル
    classDef seller fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef staff fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px
    classDef system fill:#e8f5e8,stroke:#43a047,stroke-width:2px
    classDef customer fill:#fff8e1,stroke:#ff8f00,stroke-width:2px
    classDef returns fill:#ffebee,stroke:#e53935,stroke-width:2px
    
    class A1,A2,A3,E2,E3 seller
    class B1,B2,B3,D1,D2 staff
    class C1,C3,E1 system
    class C2,D3 customer
    class RT returns