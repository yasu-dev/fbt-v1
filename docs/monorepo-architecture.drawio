<mxfile host="65bd71144e">
    <diagram id="monorepo-architecture" name="FBT-v1 モノレポ構成">
        <mxGraphModel dx="1378" dy="770" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="FBT-v1 (The World Door) モノレポ構成図" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="600" y="20" width="400" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="main-container" value="fbt-v1 (モノレポ)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=16;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="40" y="80" width="1520" height="1080" as="geometry"/>
                </mxCell>
                <mxCell id="frontend-layer" value="Frontend層 (Next.js 14 App Router)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="80" y="140" width="1440" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="pages" value="ページコンポーネント&#10;(app/*.tsx)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="100" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="components" value="UIコンポーネント&#10;(app/components/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="320" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="features" value="機能別コンポーネント&#10;(features/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="540" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="ui-library" value="Nexus Design System&#10;(ui/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="760" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="hooks" value="カスタムフック&#10;(lib/hooks/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="980" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="utils" value="ユーティリティ&#10;(lib/utils/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="180" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="api-layer" value="API層 (Next.js API Routes)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="80" y="460" width="1440" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="auth-api" value="認証API&#10;(/api/auth/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="100" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="products-api" value="商品API&#10;(/api/products/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="280" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="inventory-api" value="在庫API&#10;(/api/inventory/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="460" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="shipping-api" value="配送API&#10;(/api/shipping/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="640" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ebay-api" value="eBay API&#10;(/api/ebay/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="820" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="master-api" value="マスタAPI&#10;(/api/master/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="1000" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="analytics-api" value="分析API&#10;(/api/analytics/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="1180" y="500" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="notification-api" value="通知API&#10;(/api/notifications/*)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="1360" y="500" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="service-layer" value="サービス層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="80" y="700" width="700" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="auth-service" value="認証サービス&#10;(lib/auth.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="100" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="notification-service" value="通知サービス&#10;(notification.service.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="270" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="inventory-service" value="在庫サービス&#10;(inventory.service.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="440" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="2fa-service" value="2FA サービス&#10;(two-factor-auth.service.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="610" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="adapter-layer" value="外部サービスアダプター" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="820" y="700" width="700" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="ebay-adapter" value="eBayアダプター&#10;(ebay.adapter.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="840" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="fedex-adapter" value="FedExアダプター&#10;(fedex.adapter.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1010" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="email-adapter" value="メールアダプター&#10;(email.adapter.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1180" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="s3-adapter" value="S3アダプター&#10;(AWS S3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1350" y="740" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="data-layer" value="データアクセス層" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="80" y="900" width="700" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="prisma-orm" value="Prisma ORM&#10;(prisma/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="100" y="940" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="repositories" value="リポジトリパターン&#10;(lib/repositories/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="270" y="940" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="sqlite-db" value="SQLite DB&#10;(prisma/dev.db)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="440" y="930" width="120" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="migrations" value="マイグレーション&#10;(prisma/migrations/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="590" y="940" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="config-layer" value="設定・ビルド・テスト" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f7ff;strokeColor=#91d5ff;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="820" y="900" width="700" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="config" value="環境設定&#10;(config/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="840" y="940" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="e2e-tests" value="E2Eテスト&#10;(e2e/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="980" y="940" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="jest-tests" value="単体テスト&#10;(Jest)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1120" y="940" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="scripts" value="スクリプト&#10;(scripts/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1260" y="940" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="docs" value="ドキュメント&#10;(docs/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="1400" y="940" width="100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="frontend-layer" target="api-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="700" y="500" as="sourcePoint"/>
                        <mxPoint x="750" y="450" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow2" value="" style="endArrow=classic;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="api-layer" target="service-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="400" y="700" as="sourcePoint"/>
                        <mxPoint x="450" y="650" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow3" value="" style="endArrow=classic;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="api-layer" target="adapter-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1100" y="700" as="sourcePoint"/>
                        <mxPoint x="1150" y="650" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow4" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="service-layer" target="data-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="400" y="900" as="sourcePoint"/>
                        <mxPoint x="450" y="850" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="external-services" value="外部サービス" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="820" y="1100" width="700" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="ebay-service" value="eBay API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="840" y="1100" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="fedex-service" value="FedEx API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="960" y="1100" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="sendgrid-service" value="SendGrid" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="1080" y="1100" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="aws-s3-service" value="AWS S3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="1200" y="1100" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow5" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="adapter-layer" target="external-services" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1100" y="900" as="sourcePoint"/>
                        <mxPoint x="1150" y="850" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="legend-title" value="凡例" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="40" y="1100" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="legend-frontend" value="Frontend" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="100" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-api" value="API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="190" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-service" value="Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="280" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-adapter" value="Adapter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="370" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-data" value="Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="460" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend-config" value="Config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6f7ff;strokeColor=#91d5ff;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="550" y="1100" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="monorepo-features" value="モノレポの特徴:&#10;• 単一リポジトリで全コンポーネントを管理&#10;• Frontend/Backend/DB/テストが統合&#10;• 共通の型定義とユーティリティを共有&#10;• 統一された開発環境とビルドプロセス" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;" parent="1" vertex="1">
                    <mxGeometry x="40" y="280" width="280" height="100" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>